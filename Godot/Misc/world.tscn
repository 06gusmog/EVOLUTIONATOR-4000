[gd_scene load_steps=10 format=3 uid="uid://dqhflav3j0b86"]

[ext_resource type="Script" path="res://Misc/SimulationHandler.gd" id="1_yl8cj"]
[ext_resource type="PackedScene" uid="uid://bgpjpvrhc2ioi" path="res://Misc/food_object.tscn" id="2_8ygnx"]
[ext_resource type="Script" path="res://Misc/UserInterface.gd" id="3_6vnwv"]
[ext_resource type="PackedScene" uid="uid://bhsjq7sq2d0bo" path="res://file_logger.tscn" id="4_4un07"]
[ext_resource type="Script" path="res://Misc/AutoSaveTimer.gd" id="5_f6fae"]

[sub_resource type="CircleShape2D" id="CircleShape2D_rjn3i"]
radius = 19.0263

[sub_resource type="PhysicsMaterial" id="PhysicsMaterial_06e6h"]

[sub_resource type="ViewportTexture" id="ViewportTexture_xdqrd"]
viewport_path = NodePath("CanvasLayer/UserInterface/Creature View")

[sub_resource type="ImageTexture" id="ImageTexture_6sdd6"]

[node name="World" type="Node2D"]
script = ExtResource("1_yl8cj")
creature_amount = 20

[node name="Spawnpoints" type="Node2D" parent="."]

[node name="Spawn 1" type="Node2D" parent="Spawnpoints"]
position = Vector2(120, 120)

[node name="Area2D" type="Area2D" parent="Spawnpoints/Spawn 1"]
collision_mask = 2
monitorable = false

[node name="CollisionShape2D" type="CollisionShape2D" parent="Spawnpoints/Spawn 1/Area2D"]
shape = SubResource("CircleShape2D_rjn3i")

[node name="Spawn 2" type="Node2D" parent="Spawnpoints"]
position = Vector2(100, -170)

[node name="Area2D" type="Area2D" parent="Spawnpoints/Spawn 2"]
collision_mask = 2
monitorable = false

[node name="CollisionShape2D" type="CollisionShape2D" parent="Spawnpoints/Spawn 2/Area2D"]
shape = SubResource("CircleShape2D_rjn3i")

[node name="Spawn 3" type="Node2D" parent="Spawnpoints"]
position = Vector2(-121, -75)

[node name="Area2D" type="Area2D" parent="Spawnpoints/Spawn 3"]
collision_mask = 2
monitorable = false

[node name="CollisionShape2D" type="CollisionShape2D" parent="Spawnpoints/Spawn 3/Area2D"]
shape = SubResource("CircleShape2D_rjn3i")

[node name="Spawn 4" type="Node2D" parent="Spawnpoints"]
position = Vector2(0, -67)

[node name="Area2D" type="Area2D" parent="Spawnpoints/Spawn 4"]
collision_mask = 2
monitorable = false

[node name="CollisionShape2D" type="CollisionShape2D" parent="Spawnpoints/Spawn 4/Area2D"]
shape = SubResource("CircleShape2D_rjn3i")

[node name="Spawn 5" type="Node2D" parent="Spawnpoints"]
position = Vector2(-120, 0)

[node name="Area2D" type="Area2D" parent="Spawnpoints/Spawn 5"]
collision_mask = 2
monitorable = false

[node name="CollisionShape2D" type="CollisionShape2D" parent="Spawnpoints/Spawn 5/Area2D"]
shape = SubResource("CircleShape2D_rjn3i")

[node name="Spawn 6" type="Node2D" parent="Spawnpoints"]
position = Vector2(40, 0)

[node name="Area2D" type="Area2D" parent="Spawnpoints/Spawn 6"]
collision_mask = 2
monitorable = false

[node name="CollisionShape2D" type="CollisionShape2D" parent="Spawnpoints/Spawn 6/Area2D"]
shape = SubResource("CircleShape2D_rjn3i")

[node name="Spawn 7" type="Node2D" parent="Spawnpoints"]
position = Vector2(0, 120)

[node name="Area2D" type="Area2D" parent="Spawnpoints/Spawn 7"]
collision_mask = 2
monitorable = false

[node name="CollisionShape2D" type="CollisionShape2D" parent="Spawnpoints/Spawn 7/Area2D"]
shape = SubResource("CircleShape2D_rjn3i")

[node name="Spawn 8" type="Node2D" parent="Spawnpoints"]
position = Vector2(250, 30)

[node name="Area2D" type="Area2D" parent="Spawnpoints/Spawn 8"]
collision_mask = 2
monitorable = false

[node name="CollisionShape2D" type="CollisionShape2D" parent="Spawnpoints/Spawn 8/Area2D"]
shape = SubResource("CircleShape2D_rjn3i")

[node name="SpawnTimer" type="Timer" parent="Spawnpoints"]
wait_time = 5.0
autostart = true

[node name="FoodSpawnPoints" type="Node2D" parent="."]

[node name="FoodSpawn1" type="Node2D" parent="FoodSpawnPoints"]
position = Vector2(-198, -36)

[node name="FoodSpawn2" type="Node2D" parent="FoodSpawnPoints"]
position = Vector2(-70, 94)

[node name="FoodSpawn3" type="Node2D" parent="FoodSpawnPoints"]
position = Vector2(290, 139)

[node name="FoodSpawn4" type="Node2D" parent="FoodSpawnPoints"]
position = Vector2(-39, -159)

[node name="FoodSpawn5" type="Node2D" parent="FoodSpawnPoints"]
position = Vector2(196, -91)

[node name="FoodSpawn6" type="Node2D" parent="FoodSpawnPoints"]
position = Vector2(-51, -12)

[node name="FoodSpawn7" type="Node2D" parent="FoodSpawnPoints"]
position = Vector2(-70, -75)

[node name="FoodSpawnTimer" type="Timer" parent="FoodSpawnPoints"]
wait_time = 10.0
autostart = true

[node name="Camera2D" type="Camera2D" parent="."]

[node name="FoodObject" parent="." instance=ExtResource("2_8ygnx")]
collision_layer = 4
collision_mask = 7

[node name="StaticBody2D" type="StaticBody2D" parent="."]
physics_material_override = SubResource("PhysicsMaterial_06e6h")

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="StaticBody2D"]
polygon = PackedVector2Array(11, -98, 38, -65, 56, -67, 82, -81, 112, -67, 130, -96, 127, -136, 83, -140, 41, -124)

[node name="CollisionPolygon2D2" type="CollisionPolygon2D" parent="StaticBody2D"]
polygon = PackedVector2Array(-39, -79, -79, -89, -99, -64, -118, -38, -94, -24, -74, -5, -46, -3, -18, -23, -29, -63)

[node name="CollisionPolygon2D3" type="CollisionPolygon2D" parent="StaticBody2D"]
polygon = PackedVector2Array(199, -38, 129, -44, 96, -16, 66, 9, 59, 42, 55, 95, 105, 88, 198, 71, 222, -4)

[node name="CollisionPolygon2D4" type="CollisionPolygon2D" parent="StaticBody2D"]
polygon = PackedVector2Array(273, -139, 264, -20, 276, 31, 333, 58, 372, 151, 299, 217, 206, 183, 208, 123, 93, 154, -40, 164, -161, 113, -257, 25, -269, -95, -183, -173, -16, -219, 134, -209, 273, -139, 367, -248, -450, -265, -402, 256, 472, 263, 367, -248)

[node name="Polygon2D" type="Polygon2D" parent="StaticBody2D"]
polygon = PackedVector2Array(273, -139, 264, -20, 276, 31, 333, 58, 372, 151, 299, 217, 206, 183, 208, 123, 93, 154, -40, 164, -161, 113, -257, 25, -269, -95, -183, -173, -16, -219, 134, -209, 273, -139, 367, -248, -450, -265, -402, 256, 472, 263, 367, -248)

[node name="Polygon2D2" type="Polygon2D" parent="StaticBody2D"]
polygon = PackedVector2Array(11, -98, 38, -65, 56, -67, 82, -81, 112, -67, 130, -96, 127, -136, 83, -140, 41, -124)

[node name="Polygon2D3" type="Polygon2D" parent="StaticBody2D"]
polygon = PackedVector2Array(-39, -79, -79, -89, -99, -64, -118, -38, -94, -24, -74, -5, -46, -3, -18, -23, -29, -63)

[node name="Polygon2D4" type="Polygon2D" parent="StaticBody2D"]
polygon = PackedVector2Array(199, -38, 129, -44, 96, -16, 66, 9, 59, 42, 55, 95, 105, 88, 198, 71, 222, -4)

[node name="CanvasLayer" type="CanvasLayer" parent="."]
process_mode = 3
process_priority = 1

[node name="UserInterface" type="Control" parent="CanvasLayer"]
process_priority = 1
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
size_flags_horizontal = 0
mouse_filter = 1
script = ExtResource("3_6vnwv")

[node name="TabContainer" type="TabContainer" parent="CanvasLayer/UserInterface"]
layout_mode = 1
anchors_preset = 2
anchor_top = 1.0
anchor_bottom = 1.0
offset_top = -178.0
offset_right = 553.0
grow_vertical = 0
current_tab = 0

[node name="HBoxContainer" type="HBoxContainer" parent="CanvasLayer/UserInterface/TabContainer"]
layout_mode = 2
metadata/_tab_index = 0

[node name="Creature View" type="VBoxContainer" parent="CanvasLayer/UserInterface/TabContainer/HBoxContainer"]
layout_mode = 2

[node name="Label" type="Label" parent="CanvasLayer/UserInterface/TabContainer/HBoxContainer/Creature View"]
layout_mode = 2
size_flags_vertical = 0
text = "Energy
"
horizontal_alignment = 1

[node name="ProgressBar" type="ProgressBar" parent="CanvasLayer/UserInterface/TabContainer/HBoxContainer/Creature View"]
custom_minimum_size = Vector2(0, 270)
layout_mode = 2
size_flags_vertical = 1
fill_mode = 3

[node name="AspectRatioContainer" type="AspectRatioContainer" parent="CanvasLayer/UserInterface/TabContainer/HBoxContainer"]
custom_minimum_size = Vector2(300, 300)
layout_mode = 2

[node name="TextureRect" type="TextureRect" parent="CanvasLayer/UserInterface/TabContainer/HBoxContainer/AspectRatioContainer"]
layout_mode = 2
texture = SubResource("ViewportTexture_xdqrd")
expand_mode = 4

[node name="HBoxContainer2" type="HBoxContainer" parent="CanvasLayer/UserInterface/TabContainer"]
visible = false
layout_mode = 2
metadata/_tab_index = 1

[node name="AspectRatioContainer" type="AspectRatioContainer" parent="CanvasLayer/UserInterface/TabContainer/HBoxContainer2"]
custom_minimum_size = Vector2(100, 100)
layout_mode = 2
stretch_mode = 1
alignment_horizontal = 0

[node name="TextureRect" type="TextureRect" parent="CanvasLayer/UserInterface/TabContainer/HBoxContainer2/AspectRatioContainer"]
texture_filter = 1
custom_minimum_size = Vector2(300, 200)
layout_mode = 2
texture = SubResource("ImageTexture_6sdd6")
expand_mode = 5
stretch_mode = 4

[node name="Creature View" type="SubViewport" parent="CanvasLayer/UserInterface"]

[node name="Creature Sim" type="Node2D" parent="CanvasLayer/UserInterface/Creature View"]

[node name="Placeholder" type="Node2D" parent="CanvasLayer/UserInterface/Creature View/Creature Sim"]

[node name="Placeholder squared" type="Node2D" parent="CanvasLayer/UserInterface/Creature View/Creature Sim/Placeholder"]

[node name="FileLogger" parent="." instance=ExtResource("4_4un07")]

[node name="AutoSaveTimer" type="Timer" parent="."]
wait_time = 300.0
script = ExtResource("5_f6fae")

[connection signal="timeout" from="Spawnpoints/SpawnTimer" to="." method="_on_spawn_timer_timeout"]
[connection signal="timeout" from="FoodSpawnPoints/FoodSpawnTimer" to="." method="_on_food_spawn_timer_timeout"]
[connection signal="timeout" from="AutoSaveTimer" to="." method="_on_auto_save_timer_timeout"]
