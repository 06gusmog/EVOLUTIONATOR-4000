[gd_scene load_steps=7 format=3 uid="uid://dqhflav3j0b86"]

[ext_resource type="Script" path="res://Misc/SimulationHandler.gd" id="1_yl8cj"]
[ext_resource type="PackedScene" uid="uid://bgpjpvrhc2ioi" path="res://Misc/food_object.tscn" id="2_8ygnx"]
[ext_resource type="Script" path="res://Misc/UserInterface.gd" id="3_6vnwv"]

[sub_resource type="CircleShape2D" id="CircleShape2D_rjn3i"]
radius = 19.0263

[sub_resource type="PhysicsMaterial" id="PhysicsMaterial_06e6h"]

[sub_resource type="ViewportTexture" id="ViewportTexture_xdqrd"]
viewport_path = NodePath("CanvasLayer/UserInterface/Creature View")

[node name="World" type="Node2D"]
script = ExtResource("1_yl8cj")
creature_amount = 20

[node name="Spawnpoints" type="Node2D" parent="."]

[node name="Spawn 1" type="Node2D" parent="Spawnpoints"]
position = Vector2(29, 61)

[node name="Area2D" type="Area2D" parent="Spawnpoints/Spawn 1"]

[node name="CollisionShape2D" type="CollisionShape2D" parent="Spawnpoints/Spawn 1/Area2D"]
shape = SubResource("CircleShape2D_rjn3i")

[node name="Spawn 2" type="Node2D" parent="Spawnpoints"]
position = Vector2(156, -67)

[node name="Area2D" type="Area2D" parent="Spawnpoints/Spawn 2"]

[node name="CollisionShape2D" type="CollisionShape2D" parent="Spawnpoints/Spawn 2/Area2D"]
shape = SubResource("CircleShape2D_rjn3i")

[node name="Spawn 3" type="Node2D" parent="Spawnpoints"]
position = Vector2(-121, -75)

[node name="Area2D" type="Area2D" parent="Spawnpoints/Spawn 3"]

[node name="CollisionShape2D" type="CollisionShape2D" parent="Spawnpoints/Spawn 3/Area2D"]
shape = SubResource("CircleShape2D_rjn3i")

[node name="SpawnTimer" type="Timer" parent="Spawnpoints"]
wait_time = 5.0
autostart = true

[node name="Spawn 4" type="Node2D" parent="Spawnpoints"]
position = Vector2(0, -67)

[node name="Area2D" type="Area2D" parent="Spawnpoints/Spawn 4"]

[node name="CollisionShape2D" type="CollisionShape2D" parent="Spawnpoints/Spawn 4/Area2D"]
shape = SubResource("CircleShape2D_rjn3i")

[node name="Spawn 5" type="Node2D" parent="Spawnpoints"]
position = Vector2(-120, 0)

[node name="Area2D" type="Area2D" parent="Spawnpoints/Spawn 5"]

[node name="CollisionShape2D" type="CollisionShape2D" parent="Spawnpoints/Spawn 5/Area2D"]
shape = SubResource("CircleShape2D_rjn3i")

[node name="Spawn 6" type="Node2D" parent="Spawnpoints"]
position = Vector2(40, 0)

[node name="Area2D" type="Area2D" parent="Spawnpoints/Spawn 6"]

[node name="CollisionShape2D" type="CollisionShape2D" parent="Spawnpoints/Spawn 6/Area2D"]
shape = SubResource("CircleShape2D_rjn3i")

[node name="Camera2D" type="Camera2D" parent="."]

[node name="FoodObject" parent="." instance=ExtResource("2_8ygnx")]

[node name="FoodSpawnTimer" type="Timer" parent="."]
wait_time = 10.0
autostart = true

[node name="StaticBody2D" type="StaticBody2D" parent="."]
physics_material_override = SubResource("PhysicsMaterial_06e6h")

[node name="Polygon2D" type="Polygon2D" parent="StaticBody2D"]
polygon = PackedVector2Array(208, -151, 119, -153, 112, -95, 50, -72, 18, -121, -89, -167, -172, -144, -170, -108, -210, -72, -169, 21, -82, 61, -73, 2, -76, -39, -28, -24, -39, 34, -86, 98, 78, 139, 84, 99, 124, 47, 103, -12, 164, -11, 213, -21, 218, -64, 269, -56, 83, 210, -281, 69, -219, -199, 126, -212, 253, -187, 269, -56, 218, -64)

[node name="CollisionPolygon2D2" type="CollisionPolygon2D" parent="StaticBody2D"]
polygon = PackedVector2Array(208, -151, 119, -153, 112, -95, 50, -72, 18, -121, -89, -167, -172, -144, -170, -108, -210, -72, -169, 21, -82, 61, -73, 2, -76, -39, -28, -24, -39, 34, -86, 98, 78, 139, 84, 99, 124, 47, 103, -12, 164, -11, 213, -21, 218, -64, 269, -56, 83, 210, -281, 69, -219, -199, 126, -212, 253, -187, 269, -56, 218, -64)

[node name="CanvasLayer" type="CanvasLayer" parent="."]
process_priority = 1

[node name="UserInterface" type="Control" parent="CanvasLayer"]
process_priority = 1
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
size_flags_horizontal = 0
mouse_filter = 1
script = ExtResource("3_6vnwv")

[node name="TabContainer" type="TabContainer" parent="CanvasLayer/UserInterface"]
layout_mode = 1
anchors_preset = 2
anchor_top = 1.0
anchor_bottom = 1.0
offset_top = -178.0
offset_right = 553.0
grow_vertical = 0

[node name="HBoxContainer" type="HBoxContainer" parent="CanvasLayer/UserInterface/TabContainer"]
layout_mode = 2

[node name="Creature View" type="VBoxContainer" parent="CanvasLayer/UserInterface/TabContainer/HBoxContainer"]
layout_mode = 2

[node name="Label" type="Label" parent="CanvasLayer/UserInterface/TabContainer/HBoxContainer/Creature View"]
layout_mode = 2
size_flags_vertical = 0
text = "Energy
"
horizontal_alignment = 1

[node name="ProgressBar" type="ProgressBar" parent="CanvasLayer/UserInterface/TabContainer/HBoxContainer/Creature View"]
custom_minimum_size = Vector2(0, 270)
layout_mode = 2
size_flags_vertical = 1
fill_mode = 3

[node name="AspectRatioContainer" type="AspectRatioContainer" parent="CanvasLayer/UserInterface/TabContainer/HBoxContainer"]
custom_minimum_size = Vector2(300, 300)
layout_mode = 2

[node name="TextureRect" type="TextureRect" parent="CanvasLayer/UserInterface/TabContainer/HBoxContainer/AspectRatioContainer"]
layout_mode = 2
texture = SubResource("ViewportTexture_xdqrd")
expand_mode = 4

[node name="Exit Button" type="Button" parent="CanvasLayer/UserInterface"]
layout_mode = 1
anchors_preset = 1
anchor_left = 1.0
anchor_right = 1.0
offset_left = -8.0
offset_bottom = 8.0
grow_horizontal = 0
action_mode = 0
text = "Exit"

[node name="Creature View" type="SubViewport" parent="CanvasLayer/UserInterface"]

[node name="Creature Sim" type="Node2D" parent="CanvasLayer/UserInterface/Creature View"]

[connection signal="timeout" from="Spawnpoints/SpawnTimer" to="." method="_on_spawn_timer_timeout"]
[connection signal="timeout" from="FoodSpawnTimer" to="." method="_on_food_spawn_timer_timeout"]
[connection signal="pressed" from="CanvasLayer/UserInterface/Exit Button" to="CanvasLayer/UserInterface" method="_on_exit_button_pressed"]
